# Search (Save as Alert)
| makeresults count=1
| streamstats count
| eval url="https://your-api-endpoint/health"
| eval method="GET"
| http url=url method=method response_timeout=30
| eval is_healthy=if(status_code >= 200 AND status_code < 300, 1, 0)
| eval response_time=round(request_time * 1000, 2)
| eval alert_severity=case(
    status_code>=500, "Critical",
    status_code>=400, "Warning",
    response_time>1000, "Warning",
    1=1, "Normal"
)
| fields _time url status_code response_time alert_severity
| rename response_time as response_time_ms
| where alert_severity!="Normal"
